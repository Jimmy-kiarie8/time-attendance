import{r,q as ee,l as te,x as oe,i as l,o as i,c as f,w as t,b as e,a as C,d as V,g as P,F as S,f as s,t as g,u as L,j as z,n as $,y as ae,h as ne,A as le,V as E,R as re,W as se}from"./app-CgSA-0rK.js";const ie=["src"],ce={__name:"MainLayout",props:{title:String,modelRoute:String,rail:Boolean},setup(y){const R=y,h=r(!0),F=r(!1);r(!1),r(!0);const p=r(!0),T=r([]),B=r({}),u=r({show:!1,text:"",color:"success"}),c=ee(),U=()=>{c.global.name.value=c.global.current.value.dark?"light":"dark",localStorage.setItem("theme",c.global.name.value)},A=te(()=>a=>"/"+R.modelRoute===a),k=(a,o="success")=>{u.value={show:!0,text:a,color:o}},j=async()=>{try{const a=await E.get("/company");B.value=a.data}catch(a){console.error("Failed to fetch company data:",a),k("Failed to fetch company information. Please try again.","error")}},D=async()=>{try{const a=await E.get("/data/menu.json");T.value=a.data}catch(a){console.error("Error loading JSON data:",a),k("Failed to load menu data","error")}},I=async()=>{try{await re.post(route("logout"))}catch(a){console.error("Logout failed:",a),k("Logout failed. Please try again.","error")}},J=async()=>{await se()};return oe(()=>{const a=localStorage.getItem("theme");a&&(c.global.name.value=a),D(),j(),window.addEventListener("theme-updated",J)}),(a,o)=>{const w=l("v-divider"),q=l("v-list-subheader"),d=l("v-icon"),M=l("v-list-item-title"),m=l("v-list-item"),b=l("v-list"),O=l("v-navigation-drawer"),W=l("v-app-bar-nav-icon"),N=l("v-spacer"),v=l("v-btn"),G=l("v-card-actions"),H=l("v-card"),K=l("v-menu"),Q=l("v-app-bar"),X=l("v-main"),Y=l("v-snackbar"),Z=l("v-app");return i(),f(Z,{id:"inspire"},{default:t(()=>[e(O,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=n=>p.value=n),"expand-on-hover":y.rail,rail:y.rail,color:"primary"},{default:t(()=>[C("img",{src:B.value.logo,alt:"",srcset:"",class:"logo"},null,8,ie),e(w),(i(!0),V(S,null,P(T.value,(n,x)=>(i(),f(b,{key:x,value:n,id:"main-layout"},{default:t(()=>[n.hasSub?(i(),V(S,{key:0},[e(q,null,{default:t(()=>[s(g(n.text),1)]),_:2},1024),(i(!0),V(S,null,P(n.subMenu,_=>(i(),f(L(z),{key:x,href:_.link},{default:t(()=>[e(m,{color:"primary",variant:"plain",class:$({isActive:A.value(_.link)}),density:"compact"},{prepend:t(()=>[e(d,{icon:_.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(M,{textContent:g(_.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))),128))],64)):(i(),f(L(z),{key:x,href:n.link},{default:t(()=>[e(m,{variant:"plain",class:$({isActive:A.value(n.link)})},{prepend:t(()=>[e(d,{icon:n.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(M,{textContent:g(n.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","expand-on-hover","rail"]),e(Q,{id:"tool-bar",color:"primary"},{default:t(()=>[e(W,{onClick:o[1]||(o[1]=n=>p.value=!p.value)}),e(N),e(K,{modelValue:F.value,"onUpdate:modelValue":o[3]||(o[3]=n=>F.value=n),"close-on-content-click":!1,location:"end"},{activator:t(({props:n})=>[e(v,ae({icon:"",color:"white"},n),{default:t(()=>[e(d,null,{default:t(()=>o[6]||(o[6]=[s("mdi-account-circle")])),_:1})]),_:2},1040)]),default:t(()=>[e(w,{vertical:""}),e(H,{"min-width":"300"},{default:t(()=>[e(b,null,{default:t(()=>[e(m,{"prepend-avatar":a.$page.props.auth.user.profile_photo_url,subtitle:a.$page.props.auth.user.email,title:a.$page.props.auth.user.name},{append:t(()=>[e(v,{class:$(h.value?"text-red":""),icon:"mdi-heart",variant:"text",onClick:o[2]||(o[2]=n=>h.value=!h.value)},null,8,["class"])]),_:1},8,["prepend-avatar","subtitle","title"])]),_:1}),e(w),e(b,null,{default:t(()=>[e(m,{href:a.route("profile.show")},{prepend:t(()=>[e(d,null,{default:t(()=>o[7]||(o[7]=[s("mdi-account-circle")])),_:1})]),default:t(()=>[o[8]||(o[8]=s(" Profile "))]),_:1},8,["href"])]),_:1}),e(G,null,{default:t(()=>[e(N),C("form",{onSubmit:ne(I,["prevent"])},[e(v,{variant:"outlined",color:"error",type:"submit"},{default:t(()=>[e(d,null,{default:t(()=>o[9]||(o[9]=[s("mdi-logout")])),_:1}),o[10]||(o[10]=s(" Logout"))]),_:1})],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o[11]||(o[11]=C("div",{style:{"margin-right":"10px"}},null,-1)),e(v,{class:"ma-2",variant:"text",icon:L(c).global.current.value.dark?"mdi-white-balance-sunny":"mdi-weather-night",color:"white",onClick:U},null,8,["icon"])]),_:1}),e(X,null,{default:t(()=>[le(a.$slots,"default")]),_:3}),e(Y,{modelValue:u.value.show,"onUpdate:modelValue":o[5]||(o[5]=n=>u.value.show=n),color:u.value.color},{actions:t(()=>[e(v,{color:"pink",variant:"text",onClick:o[4]||(o[4]=n=>u.value.show=!1)},{default:t(()=>o[12]||(o[12]=[s(" Close ")])),_:1})]),default:t(()=>[s(g(u.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:3})}}};export{ce as _};
