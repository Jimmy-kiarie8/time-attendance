import{r,q as Y,l as Z,x as ee,i as l,o as u,c as y,w as t,b as e,a as x,d as V,g as B,F as C,f as s,t as f,u as S,j as F,n as M,y as te,h as oe,A as ne,V as ae,R as le,W as se}from"./app-DTApRKiJ.js";const re=["src"],ue={__name:"MainLayout",props:{title:String,modelRoute:String,rail:Boolean},setup(b){const D=b,g=r(!0),L=r(!1);r(!1),r(!0);const m=r(!0),P=[{text:"Dashboard",link:"/",icon:"mdi-view-dashboard",hasSub:!1,permission:"View Dashboard",subMenu:[]},{text:"Master Records",link:"#",icon:"mdi-account",hasSub:!0,permission:"View Users",subMenu:[{text:"Employees",link:"/employees",icon:"mdi-account-circle",hasSub:!1,permission:"View Clients",subMenu:[]},{text:"Attendance",link:"/attendance",icon:"mdi-chart-areaspline",hasSub:!1,permission:"View Clients",subMenu:[]},{text:"Departments",link:"/departments",icon:"mdi-card-account-details",hasSub:!1,permission:"View Clients",subMenu:[]}]},{text:"Reports",link:"/system-reports",icon:"mdi-chart-areaspline",hasSub:!1,permission:"View Reports",subMenu:[]},{text:"Users",link:"#",icon:"mdi-account",hasSub:!0,permission:"View Users",subMenu:[{text:"Users",link:"/users",icon:"mdi-account-circle",hasSub:!0,permission:"View Reports",subMenu:[]}]}],R=r({}),i=r({show:!1,text:"",color:"success"}),c=Y(),z=()=>{c.global.name.value=c.global.current.value.dark?"light":"dark",localStorage.setItem("theme",c.global.name.value)},U=Z(()=>a=>"/"+D.modelRoute===a),$=(a,o="success")=>{i.value={show:!0,text:a,color:o}},E=async()=>{try{const a=await ae.get("/company");R.value=a.data}catch(a){console.error("Failed to fetch company data:",a),$("Failed to fetch company information. Please try again.","error")}},N=async()=>{try{await le.post(route("logout"))}catch(a){console.error("Logout failed:",a),$("Logout failed. Please try again.","error")}},I=async()=>{await se()};return ee(()=>{const a=localStorage.getItem("theme");a&&(c.global.name.value=a),E(),window.addEventListener("theme-updated",I)}),(a,o)=>{const h=l("v-divider"),j=l("v-list-subheader"),d=l("v-icon"),T=l("v-list-item-title"),v=l("v-list-item"),k=l("v-list"),q=l("v-navigation-drawer"),W=l("v-app-bar-nav-icon"),A=l("v-spacer"),p=l("v-btn"),G=l("v-card-actions"),H=l("v-card"),J=l("v-menu"),K=l("v-app-bar"),O=l("v-main"),Q=l("v-snackbar"),X=l("v-app");return u(),y(X,{id:"inspire"},{default:t(()=>[e(q,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=n=>m.value=n),"expand-on-hover":b.rail,rail:b.rail,color:"primary"},{default:t(()=>[x("img",{src:R.value.logo,alt:"",srcset:"",class:"logo"},null,8,re),e(h),(u(),V(C,null,B(P,(n,w)=>e(k,{key:w,value:n,id:"main-layout"},{default:t(()=>[n.hasSub?(u(),V(C,{key:0},[e(j,null,{default:t(()=>[s(f(n.text),1)]),_:2},1024),(u(!0),V(C,null,B(n.subMenu,_=>(u(),y(S(F),{key:w,href:_.link},{default:t(()=>[e(v,{color:"primary",variant:"plain",class:M({isActive:U.value(_.link)}),density:"compact"},{prepend:t(()=>[e(d,{icon:_.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(T,{textContent:f(_.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))),128))],64)):(u(),y(S(F),{key:w,href:n.link},{default:t(()=>[e(v,{variant:"plain",class:M({isActive:U.value(n.link)})},{prepend:t(()=>[e(d,{icon:n.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(T,{textContent:f(n.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","expand-on-hover","rail"]),e(K,{id:"tool-bar",color:"primary"},{default:t(()=>[e(W,{onClick:o[1]||(o[1]=n=>m.value=!m.value)}),e(A),e(J,{modelValue:L.value,"onUpdate:modelValue":o[3]||(o[3]=n=>L.value=n),"close-on-content-click":!1,location:"end"},{activator:t(({props:n})=>[e(p,te({icon:"",color:"white"},n),{default:t(()=>[e(d,null,{default:t(()=>o[6]||(o[6]=[s("mdi-account-circle")])),_:1})]),_:2},1040)]),default:t(()=>[e(h,{vertical:""}),e(H,{"min-width":"300"},{default:t(()=>[e(k,null,{default:t(()=>[e(v,{"prepend-avatar":a.$page.props.auth.user.profile_photo_url,subtitle:a.$page.props.auth.user.email,title:a.$page.props.auth.user.name},{append:t(()=>[e(p,{class:M(g.value?"text-red":""),icon:"mdi-heart",variant:"text",onClick:o[2]||(o[2]=n=>g.value=!g.value)},null,8,["class"])]),_:1},8,["prepend-avatar","subtitle","title"])]),_:1}),e(h),e(k,null,{default:t(()=>[e(v,{href:a.route("profile.show")},{prepend:t(()=>[e(d,null,{default:t(()=>o[7]||(o[7]=[s("mdi-account-circle")])),_:1})]),default:t(()=>[o[8]||(o[8]=s(" Profile "))]),_:1},8,["href"])]),_:1}),e(G,null,{default:t(()=>[e(A),x("form",{onSubmit:oe(N,["prevent"])},[e(p,{variant:"outlined",color:"error",type:"submit"},{default:t(()=>[e(d,null,{default:t(()=>o[9]||(o[9]=[s("mdi-logout")])),_:1}),o[10]||(o[10]=s(" Logout"))]),_:1})],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o[11]||(o[11]=x("div",{style:{"margin-right":"10px"}},null,-1)),e(p,{class:"ma-2",variant:"text",icon:S(c).global.current.value.dark?"mdi-white-balance-sunny":"mdi-weather-night",color:"white",onClick:z},null,8,["icon"])]),_:1}),e(O,null,{default:t(()=>[ne(a.$slots,"default")]),_:3}),e(Q,{modelValue:i.value.show,"onUpdate:modelValue":o[5]||(o[5]=n=>i.value.show=n),color:i.value.color},{actions:t(()=>[e(p,{color:"pink",variant:"text",onClick:o[4]||(o[4]=n=>i.value.show=!1)},{default:t(()=>o[12]||(o[12]=[s(" Close ")])),_:1})]),default:t(()=>[s(f(i.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:3})}}};export{ue as _};
