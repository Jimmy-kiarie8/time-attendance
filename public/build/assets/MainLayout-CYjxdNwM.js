import{r,q as Y,l as Z,x as ee,i as s,o as u,c as y,w as t,b as e,a as x,d as V,g as B,F as S,f as l,t as f,u as C,j as F,n as M,y as te,h as ne,A as oe,V as ae,R as se,W as le}from"./app-kuiK7TtZ.js";const re=["src"],ue={__name:"MainLayout",props:{title:String,modelRoute:String,rail:Boolean},setup(b){const D=b,g=r(!0),R=r(!1);r(!1),r(!0);const m=r(!0),P=[{text:"Dashboard",link:"/",icon:"mdi-view-dashboard",hasSub:!1,permission:"View Dashboard",subMenu:[]},{text:"Master Records",link:"#",icon:"mdi-account",hasSub:!0,permission:"View Users",subMenu:[{text:"Employees",link:"/employees",icon:"mdi-account-circle",hasSub:!1,permission:"View Clients",subMenu:[]},{text:"Attendance",link:"/attendance",icon:"mdi-chart-areaspline",hasSub:!1,permission:"View Clients",subMenu:[]},{text:"Departments",link:"/departments",icon:"mdi-card-account-details",hasSub:!1,permission:"View Clients",subMenu:[]}]},{text:"Reports",link:"/system-reports",icon:"mdi-chart-areaspline",hasSub:!1,permission:"View Reports",subMenu:[]},{text:"Users",link:"#",icon:"mdi-account",hasSub:!0,permission:"View Users",subMenu:[{text:"Users",link:"/users",icon:"mdi-account-circle",hasSub:!0,permission:"View Reports",subMenu:[]}]},{text:"Settings",link:"#",icon:"mdi-cog",hasSub:!0,permission:"View Users",subMenu:[{text:"Settings",link:"/settings",icon:"mdi-cog",hasSub:!0,permission:"View Reports",subMenu:[]}]}],U=r({}),i=r({show:!1,text:"",color:"success"}),c=Y(),z=()=>{c.global.name.value=c.global.current.value.dark?"light":"dark",localStorage.setItem("theme",c.global.name.value)},L=Z(()=>a=>"/"+D.modelRoute===a),$=(a,n="success")=>{i.value={show:!0,text:a,color:n}},E=async()=>{try{const a=await ae.get("/company");U.value=a.data}catch(a){console.error("Failed to fetch company data:",a),$("Failed to fetch company information. Please try again.","error")}},N=async()=>{try{await se.post(route("logout"))}catch(a){console.error("Logout failed:",a),$("Logout failed. Please try again.","error")}},I=async()=>{await le()};return ee(()=>{const a=localStorage.getItem("theme");a&&(c.global.name.value=a),E(),window.addEventListener("theme-updated",I)}),(a,n)=>{const h=s("v-divider"),j=s("v-list-subheader"),d=s("v-icon"),T=s("v-list-item-title"),v=s("v-list-item"),k=s("v-list"),q=s("v-navigation-drawer"),W=s("v-app-bar-nav-icon"),A=s("v-spacer"),p=s("v-btn"),G=s("v-card-actions"),H=s("v-card"),J=s("v-menu"),K=s("v-app-bar"),O=s("v-main"),Q=s("v-snackbar"),X=s("v-app");return u(),y(X,{id:"inspire"},{default:t(()=>[e(q,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=o=>m.value=o),"expand-on-hover":b.rail,rail:b.rail,color:"primary"},{default:t(()=>[x("img",{src:U.value.logo,alt:"",srcset:"",class:"logo"},null,8,re),e(h),(u(),V(S,null,B(P,(o,w)=>e(k,{key:w,value:o,id:"main-layout"},{default:t(()=>[o.hasSub?(u(),V(S,{key:0},[e(j,null,{default:t(()=>[l(f(o.text),1)]),_:2},1024),(u(!0),V(S,null,B(o.subMenu,_=>(u(),y(C(F),{key:w,href:_.link},{default:t(()=>[e(v,{color:"primary",variant:"plain",class:M({isActive:L.value(_.link)}),density:"compact"},{prepend:t(()=>[e(d,{icon:_.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(T,{textContent:f(_.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))),128))],64)):(u(),y(C(F),{key:w,href:o.link},{default:t(()=>[e(v,{variant:"plain",class:M({isActive:L.value(o.link)})},{prepend:t(()=>[e(d,{icon:o.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(T,{textContent:f(o.text)},null,8,["textContent"])]),_:2},1032,["class"])]),_:2},1032,["href"]))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","expand-on-hover","rail"]),e(K,{id:"tool-bar",color:"primary"},{default:t(()=>[e(W,{onClick:n[1]||(n[1]=o=>m.value=!m.value)}),e(A),e(J,{modelValue:R.value,"onUpdate:modelValue":n[3]||(n[3]=o=>R.value=o),"close-on-content-click":!1,location:"end"},{activator:t(({props:o})=>[e(p,te({icon:"",color:"white"},o),{default:t(()=>[e(d,null,{default:t(()=>n[6]||(n[6]=[l("mdi-account-circle")])),_:1})]),_:2},1040)]),default:t(()=>[e(h,{vertical:""}),e(H,{"min-width":"300"},{default:t(()=>[e(k,null,{default:t(()=>[e(v,{"prepend-avatar":a.$page.props.auth.user.profile_photo_url,subtitle:a.$page.props.auth.user.email,title:a.$page.props.auth.user.name},{append:t(()=>[e(p,{class:M(g.value?"text-red":""),icon:"mdi-heart",variant:"text",onClick:n[2]||(n[2]=o=>g.value=!g.value)},null,8,["class"])]),_:1},8,["prepend-avatar","subtitle","title"])]),_:1}),e(h),e(k,null,{default:t(()=>[e(v,{href:a.route("profile.show")},{prepend:t(()=>[e(d,null,{default:t(()=>n[7]||(n[7]=[l("mdi-account-circle")])),_:1})]),default:t(()=>[n[8]||(n[8]=l(" Profile "))]),_:1},8,["href"])]),_:1}),e(G,null,{default:t(()=>[e(A),x("form",{onSubmit:ne(N,["prevent"])},[e(p,{variant:"outlined",color:"error",type:"submit"},{default:t(()=>[e(d,null,{default:t(()=>n[9]||(n[9]=[l("mdi-logout")])),_:1}),n[10]||(n[10]=l(" Logout"))]),_:1})],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),n[11]||(n[11]=x("div",{style:{"margin-right":"10px"}},null,-1)),e(p,{class:"ma-2",variant:"text",icon:C(c).global.current.value.dark?"mdi-white-balance-sunny":"mdi-weather-night",color:"white",onClick:z},null,8,["icon"])]),_:1}),e(O,null,{default:t(()=>[oe(a.$slots,"default")]),_:3}),e(Q,{modelValue:i.value.show,"onUpdate:modelValue":n[5]||(n[5]=o=>i.value.show=o),color:i.value.color},{actions:t(()=>[e(p,{color:"pink",variant:"text",onClick:n[4]||(n[4]=o=>i.value.show=!1)},{default:t(()=>n[12]||(n[12]=[l(" Close ")])),_:1})]),default:t(()=>[l(f(i.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:3})}}};export{ue as _};
