import{_ as F}from"./FormComponent-By57zqpX.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as l,o as c,c as g,w as t,b as o,f as d,t as v,d as k,g as V,a as K,F as x}from"./app-CgSA-0rK.js";const O={props:{modelRoute:String,title:String},components:{myForm:F},data(){return{dialog:!1,loading:!1,selectAll:!1,snackbar:!1,permissions:[],text:"Created",form:{}}},mounted(){console.log(this.permissions)},methods:{toggleSelectAll(){const i=this.selectAll,e=JSON.parse(JSON.stringify(this.permissions));for(let r in e){const a=e[r];for(let s of a)s.has_permission=i}this.permissions=e},async getPermission(i){this.loading=!0;try{const e=await axios.get(`permissions/${i}`);this.permissions=e.data,console.log("ðŸš€ ~ dispatch ~ response:",e)}catch(e){console.log("ðŸš€ ~ axios.get ~ error:",e)}finally{this.loading=!1}},submit(){const i=[];for(let e in this.permissions){const r=this.permissions[e];for(let a of r)a.has_permission&&i.push(a.id)}this.loading=!0,this.form.permissions=i,this.$inertia.post(`/${this.modelRoute}`,this.form,{onError:()=>{this.loading=!1,this.text="Something went wrong",this.snackbar=!0},onSuccess:()=>{this.text="Created",this.loading=!1,this.snackbar=!0,console.log("success")}}),setTimeout(()=>{this.loading=!1},5e3)},show(){this.dialog=!0,this.getPermission(0)},close(){this.dialog=!1}}};function R(i,e,r,a,s,p){const y=l("v-card-title"),C=l("v-text-field"),m=l("v-col"),u=l("v-row"),S=l("v-divider"),h=l("v-checkbox"),w=l("v-card-text"),_=l("v-btn"),A=l("v-spacer"),N=l("v-card-actions"),U=l("v-card"),B=l("v-snackbar"),P=l("v-dialog");return c(),g(u,{justify:"center"},{default:t(()=>[o(P,{persistent:"",modelValue:s.dialog,"onUpdate:modelValue":e[4]||(e[4]=n=>s.dialog=n),width:"800"},{default:t(()=>[o(U,null,{default:t(()=>[o(y,{class:"text-h5"},{default:t(()=>[d(" Edit "+v(r.title),1)]),_:1}),o(w,null,{default:t(()=>[o(u,null,{default:t(()=>[o(m,{cols:"12",md:"12"},{default:t(()=>[o(C,{clearable:"",label:"Name",variant:"outlined",modelValue:s.form.name,"onUpdate:modelValue":e[0]||(e[0]=n=>s.form.name=n),type:"text"},null,8,["modelValue"])]),_:1})]),_:1}),o(S),o(u,null,{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[o(h,{modelValue:s.selectAll,"onUpdate:modelValue":e[1]||(e[1]=n=>s.selectAll=n),color:"primary",label:"Select All",onChange:p.toggleSelectAll},null,8,["modelValue","onChange"])]),_:1})]),_:1}),(c(!0),k(x,null,V(s.permissions,(n,b)=>(c(),g(u,{key:b},{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[K("h2",null,v(b),1)]),_:2},1024),(c(!0),k(x,null,V(n,f=>(c(),g(m,{cols:"3",md:"3"},{default:t(()=>[o(h,{modelValue:f.has_permission,"onUpdate:modelValue":E=>f.has_permission=E,color:"secondary",label:f.name},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024))),256))]),_:2},1024))),128))]),_:1}),o(N,null,{default:t(()=>[o(_,{variant:"outlined",color:"error",onClick:p.close},{default:t(()=>e[5]||(e[5]=[d("Close")])),_:1},8,["onClick"]),o(A),o(_,{variant:"outlined",color:"primary",onClick:p.submit},{default:t(()=>e[6]||(e[6]=[d("Submit")])),_:1},8,["onClick"])]),_:1})]),_:1}),o(B,{modelValue:s.snackbar,"onUpdate:modelValue":e[3]||(e[3]=n=>s.snackbar=n)},{actions:t(()=>[o(_,{color:"pink",variant:"text",onClick:e[2]||(e[2]=n=>s.snackbar=!1)},{default:t(()=>e[7]||(e[7]=[d("Close")])),_:1})]),default:t(()=>[d(v(s.text)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})}const I=J(O,[["render",R]]);export{I as default};
