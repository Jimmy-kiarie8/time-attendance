import{_ as E}from"./FormComponent-BXJpgamY.js";import{V as P,i as l,o as c,c as g,w as o,b as t,f as d,t as h,d as k,g as V,a as F,F as x}from"./app-C40yS1Zs.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={props:{modelRoute:String,title:String,user:Object},components:{myForm:E},data(){return{dialog:!1,form:{},snackbar:!1,permissions:[],text:"Created",selectAll:!1,id:null}},mounted(){},methods:{toggleSelectAll(){const n=this.selectAll,e=JSON.parse(JSON.stringify(this.permissions));for(let r in e){const a=e[r];for(let s of a)s.has_permission=n}this.permissions=e},async getPermission(n){this.loading=!0;try{const e=await P.get(`permissions/${n}`);this.permissions=e.data,console.log("ðŸš€ ~ dispatch ~ response:",e)}catch(e){console.log("ðŸš€ ~ axios.get ~ error:",e)}finally{this.loading=!1}},submit(){const n=[];for(let e in this.permissions){const r=this.permissions[e];for(let a of r)a.has_permission&&n.push(a.id)}this.loading=!0,this.form.permissions=n,this.$inertia.patch(`/${this.modelRoute}/${this.id}`,this.form,{onError:()=>{this.loading=!1,this.text="Something went wrong",this.snackbar=!0},onSuccess:()=>{this.text="Updated",this.loading=!1,this.snackbar=!0,console.log("success")}}),setTimeout(()=>{this.loading=!1},5e3)},close(){this.dialog=!1},show(n){this.id=n,this.dialog=!0,this.getPermission(n)},hide(){this.dialog=!1}}};function J(n,e,r,a,s,m){const y=l("v-card-title"),v=l("v-checkbox"),u=l("v-col"),p=l("v-row"),C=l("v-card-text"),_=l("v-btn"),S=l("v-spacer"),w=l("v-card-actions"),A=l("v-card"),U=l("v-snackbar"),N=l("v-dialog");return c(),g(p,{justify:"center"},{default:o(()=>[t(N,{persistent:"",modelValue:s.dialog,"onUpdate:modelValue":e[3]||(e[3]=i=>s.dialog=i),width:"800"},{default:o(()=>[t(A,null,{default:o(()=>[t(y,{class:"text-h5"},{default:o(()=>[d(" Edit "+h(r.title),1)]),_:1}),t(C,null,{default:o(()=>[t(p,null,{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[t(v,{modelValue:s.selectAll,"onUpdate:modelValue":e[0]||(e[0]=i=>s.selectAll=i),color:"primary",label:"Select All",onChange:m.toggleSelectAll},null,8,["modelValue","onChange"])]),_:1})]),_:1}),(c(!0),k(x,null,V(s.permissions,(i,b)=>(c(),g(p,{key:b},{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[F("h2",null,h(b),1)]),_:2},1024),(c(!0),k(x,null,V(i,f=>(c(),g(u,{cols:"3",md:"3"},{default:o(()=>[t(v,{modelValue:f.has_permission,"onUpdate:modelValue":B=>f.has_permission=B,color:"secondary",label:f.name},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024))),256))]),_:2},1024))),128))]),_:1}),t(w,null,{default:o(()=>[t(_,{variant:"outlined",color:"error",onClick:m.close},{default:o(()=>e[4]||(e[4]=[d("Close")])),_:1},8,["onClick"]),t(S),t(_,{variant:"outlined",color:"primary",onClick:m.submit},{default:o(()=>e[5]||(e[5]=[d("Submit")])),_:1},8,["onClick"])]),_:1})]),_:1}),t(U,{modelValue:s.snackbar,"onUpdate:modelValue":e[2]||(e[2]=i=>s.snackbar=i)},{actions:o(()=>[t(_,{color:"pink",variant:"text",onClick:e[1]||(e[1]=i=>s.snackbar=!1)},{default:o(()=>e[6]||(e[6]=[d("Close")])),_:1})]),default:o(()=>[d(h(s.text)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})}const D=O(j,[["render",J]]);export{D as default};
