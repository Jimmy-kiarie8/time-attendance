import{_ as T}from"./FormComponent-By57zqpX.js";import{r as s,D as z,i as o,o as A,c as G,w as a,e as H,b as t,f as u,t as V,V as b}from"./app-CgSA-0rK.js";const K={__name:"edit",props:{modelRoute:{type:String,required:!0},title:{type:String,required:!0},modalWidth:{type:Number,required:!0}},emits:["refresh"],setup(_,{expose:k,emit:C}){const g=_,n=s(!1),d=s(!1),v=s("Updated"),m=s("black"),p=s(!1),y=s(null),c=z({}),f=s([]),D=C;async function h(l){try{const e=await b.get(`/${g.modelRoute}/${l}/edit`);f.value=e.data,console.log("formData",f.value),f.value.forEach(r=>{r.type==="file"?c[r.model]=r.multiple?[]:null:c[r.model]=r.value})}catch(e){console.error("Failed to fetch data:",e),d.value=!0,m.value="error",v.value="Failed to load data"}}function S(){p.value=!0,b.patch(`/${g.modelRoute}/${y.value}`,c).then(l=>{d.value=!0,m.value="success",v.value="Updated successfully",n.value=!1,D("refresh",!1),n.value=!1}).catch(l=>{console.error(l),d.value=!0,m.value="error",v.value="Something went wrong!"}).finally(()=>{p.value=!1})}function U(l){console.log(l.id),n.value=!0,y.value=l.id,h(l.id)}function $(){n.value=!1}return k({show:U}),(l,e)=>{const r=o("v-divider"),N=o("v-card-title"),q=o("v-card-text"),w=o("v-icon"),x=o("v-btn"),F=o("v-spacer"),R=o("v-card-actions"),B=o("v-card"),E=o("v-dialog"),W=o("v-snackbar"),j=o("v-row");return n.value?(A(),G(j,{key:0,justify:"center"},{default:a(()=>[t(E,{persistent:"",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=i=>n.value=i),width:_.modalWidth},{default:a(()=>[t(r),t(B,null,{default:a(()=>[t(N,{class:"text-h5"},{default:a(()=>[u(" Edit "+V(_.title),1)]),_:1}),t(q,null,{default:a(()=>[t(T,{formData:f.value,form:c,"onUpdate:form":e[0]||(e[0]=i=>c=i)},null,8,["formData","form"])]),_:1}),t(R,null,{default:a(()=>[t(x,{variant:"outlined",color:"red",onClick:$},{default:a(()=>[t(w,null,{default:a(()=>e[3]||(e[3]=[u("mdi-close")])),_:1}),e[4]||(e[4]=u(" Close "))]),_:1}),t(F),t(x,{variant:"outlined",color:"primary",onClick:S,loading:p.value},{default:a(()=>[t(w,null,{default:a(()=>e[5]||(e[5]=[u("mdi-content-save")])),_:1}),e[6]||(e[6]=u(" Save Changes "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),t(W,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),color:m.value},{default:a(()=>[u(V(v.value),1)]),_:1},8,["modelValue","color"])]),_:1})):H("",!0)}}};export{K as default};
