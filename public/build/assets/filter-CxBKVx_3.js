import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as n,o as d,c,w as s,b as r,d as k,g as R,e as b,F as C}from"./app-C40yS1Zs.js";const V={props:{filterRoute:String,filterData:Object},data(){return{report_data:[],headers:[],search:"",page:1,loading:!1,itemsPerPage:5,statuses:["Scheduled","Cancelled","Delivered","Returned","Dispatched"]}},methods:{filter(){this.loading=!0;let a={};this.filterData.forEach(e=>{a[e.model]=e.value}),this.$emit("load",!0),axios.post(`/${this.filterRoute}`,a).then(e=>{console.log(e),this.loading=!1,this.data=e.data,this.$emit("filter",e.data),this.$emit("load",!1)}).catch(e=>{this.loading=!1,this.$emit("load",!1)})},async downloadReport(a){this.loading=!0;try{const e=this.filterData.reduce((t,o)=>(Array.isArray(o.value)?t[o.model]=o.value.map(p=>p.value):o.value&&typeof o.value=="object"?t[o.model]=o.value.value:t[o.model]=o.value,t),{});e.filetype=a;const u=await axios.post("/download-export",e,{responseType:"blob"}),v=new Blob([u.data],{type:a==="pdf"?"application/pdf":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(v);if(a==="pdf")window.open(i,"_blank");else{const t=document.createElement("a");t.href=i,t.setAttribute("download",`Report_${new Date().toISOString()}.xlsx`),document.body.appendChild(t),t.click(),document.body.removeChild(t)}window.URL.revokeObjectURL(i),this.loading=!1}catch(e){this.loading=!1,console.error("Error downloading report:",e)}}}};function D(a,e,u,v,i,t){const o=n("v-autocomplete"),p=n("v-text-field"),_=n("v-col"),f=n("v-btn"),h=n("v-btn-group"),y=n("v-row"),w=n("v-card");return d(),c(w,{class:"mx-auto",variant:"flat"},{default:s(()=>[r(y,null,{default:s(()=>[(d(!0),k(C,null,R(u.filterData,(l,g)=>(d(),c(_,{key:g,cols:"12",sm:"2"},{default:s(()=>[l.type=="select"?(d(),c(o,{key:0,clearable:"",chips:"",label:l.label,items:l.items,variant:"outlined","item-title":"label","item-value":"value",modelValue:l.value,"onUpdate:modelValue":m=>l.value=m,multiple:l.multiple,"return-object":"",density:"compact"},null,8,["label","items","modelValue","onUpdate:modelValue","multiple"])):b("",!0),l.type=="date"?(d(),c(p,{key:1,clearable:"",label:l.label,variant:"outlined",modelValue:l.value,"onUpdate:modelValue":m=>l.value=m,type:"date",density:"compact"},null,8,["label","modelValue","onUpdate:modelValue"])):b("",!0)]),_:2},1024))),128)),r(_,null,{default:s(()=>[r(h,{divided:""},{default:s(()=>[r(f,{color:"primary",icon:"mdi-magnify",onClick:t.filter},null,8,["onClick"]),r(f,{color:"primary",icon:"mdi-file-excel-outline",onClick:e[0]||(e[0]=l=>t.downloadReport("excle"))}),r(f,{color:"primary",icon:"mdi-file-pdf-box",onClick:e[1]||(e[1]=l=>t.downloadReport("pdf"))})]),_:1})]),_:1})]),_:1})]),_:1})}const j=x(V,[["render",D],["__scopeId","data-v-5d66d757"]]);export{j as default};
