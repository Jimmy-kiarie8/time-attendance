import{_ as M}from"./MainLayout-DCj_4SV5.js";import{O as A,V as p,i as a,o as b,c as g,w as o,b as t,a as c,f as i,t as _,e as j,y as B}from"./app-C40yS1Zs.js";import L from"./create-Fm0PysVi.js";import T from"./table-By_0x4_Y.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./edit-DBFSnAB8.js";import"./FormComponent-BXJpgamY.js";const F={props:{data:Object,headers:Object,modelRoute:String,title:String,clients:Object,filterData:Object,filterRoute:String,canFilter:Boolean,canCreate:Boolean,canFilterTab:Boolean,actions:Object,modalWidth:Number},components:{MainLayout:M,myCreate:L,componentTable:T},data(){return{tableData:{},search:"",page:1,loading:!1,dialogDelete:!1,itemsPerPage:5,editedIndex:-1,editedItem:{},tab:"all",tabs:[{icon:"mdi-alpha-l-circle",text:"All",value:"all"},{icon:"mdi-book-open-page-variant",text:"Pending",value:"Pending"},{icon:"mdi-handshake-outline",text:"Approved",value:"Approved"},{icon:"mdi-checkbox-marked",text:"Active",value:"Active"},{icon:"mdi-close-circle",text:"Arrears",value:"Arrears"},{icon:"mdi-checkbox-multiple-outline",text:"Fully Paid",value:"Paid"},{icon:"mdi-format-overline",text:"Over Paid",value:"Over paid"},{icon:"mdi-cancel",text:"Rejected",value:"Rejected"},{icon:"mdi-pen-lock",text:"Write-offs",value:"Written Off"},{icon:"mdi-alarm",text:"Restructured",value:"Restructured"}],snackbar:!1,text:"Updated",color:"black"}},methods:{goTo(n){A.visit(n)},close(){this.dialogDelete=!1},openCreate(){this.$refs.createModal.show()},async refresh(){if(this.modelRoute==="loans")this.filterLoans();else{this.loading=!0;try{const n=await p.get(`/${this.modelRoute}?axios=true`);this.tableData=n.data}catch{this.loading=!1}finally{this.loading=!1}}},uploadItem(){this.$refs.uploadModal.show()},async filterLoans(){this.loading=!0;const n={status:this.tab};try{const e=await p.post("/loan-filter",n);console.log("ðŸš€ ~ dispatch ~ response:",e),this.tableData=e.data}catch(e){console.log("ðŸš€ ~ axios.get ~ error:",e)}finally{this.loading=!1}},handleFilter(n){this.tableData=n},handleLoading(n){this.loading=n}},computed:{pageCount(){return Math.ceil(this.data.data.length/this.itemsPerPage)}},mounted(){this.tableData=this.data}},I={color:"primary"},S={class:"overflow-hidden shadow-xl sm:rounded-lg"};function U(n,e,l,z,r,d){const m=a("v-icon"),x=a("v-toolbar-title"),f=a("v-spacer"),u=a("v-btn"),k=a("v-toolbar"),v=a("v-divider"),C=a("v-tooltip"),y=a("componentTable"),h=a("v-card"),R=a("v-card-title"),D=a("v-card-text"),w=a("v-card-actions"),O=a("v-dialog"),V=a("myCreate"),P=a("v-snackbar"),W=a("MainLayout");return b(),g(W,{title:l.title,rail:!1,modelRoute:l.modelRoute,ref:"snackBarModal"},{default:o(()=>[t(k,{color:"transparent"},{default:o(()=>[t(x,null,{default:o(()=>[c("h2",I,[i(_(l.title)+" Management ",1),t(m,{icon:"mdi-shimmer",size:"30"})])]),_:1}),t(f),t(f),l.canCreate?(b(),g(u,{key:0,"prepend-icon":"mdi-plus",elevated:"",variant:"outlined",onClick:d.openCreate,color:"info"},{default:o(()=>[i(" Create "+_(l.title),1)]),_:1},8,["onClick"])):j("",!0),e[3]||(e[3]=c("div",{style:{width:"10px"}},null,-1))]),_:1}),t(v),e[12]||(e[12]=c("br",null,null,-1)),c("div",S,[t(h,null,{default:o(()=>[t(C,{location:"bottom"},{activator:o(({props:s})=>[t(u,B({icon:""},s,{onClick:e[0]||(e[0]=K=>d.refresh()),variant:"text",color:"primary"}),{default:o(()=>[t(m,null,{default:o(()=>e[4]||(e[4]=[i(" mdi-refresh ")])),_:1})]),_:2},1040)]),default:o(()=>[e[5]||(e[5]=c("span",null,"Refresh",-1))]),_:1}),t(y,{canCreate:l.canCreate,headers:l.headers,modelRoute:l.modelRoute,title:l.title,actions:l.actions,modalWidth:l.modalWidth,tableData:r.tableData,onRefresh:d.refresh,loading:r.loading},null,8,["canCreate","headers","modelRoute","title","actions","modalWidth","tableData","onRefresh","loading"])]),_:1})]),t(O,{modelValue:r.dialogDelete,"onUpdate:modelValue":e[1]||(e[1]=s=>r.dialogDelete=s),"max-width":"400px"},{default:o(()=>[t(h,null,{default:o(()=>[t(R,{class:"text-h5"},{default:o(()=>e[6]||(e[6]=[i("Warning!")])),_:1}),t(v),t(D,null,{default:o(()=>e[7]||(e[7]=[i(" Are you sure you want to delete this item? ")])),_:1}),t(v),t(w,null,{default:o(()=>[t(u,{color:"red-darken-1",variant:"tonal",onClick:d.close},{default:o(()=>[t(m,null,{default:o(()=>e[8]||(e[8]=[i("mdi-close-box")])),_:1}),e[9]||(e[9]=i("Cancel "))]),_:1},8,["onClick"]),t(f),t(u,{color:"primary",variant:"tonal",onClick:n.deleteItemConfirm},{default:o(()=>[t(m,null,{default:o(()=>e[10]||(e[10]=[i("mdi-checkbox-marked")])),_:1}),e[11]||(e[11]=i("OK "))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(V,{modalWidth:l.modalWidth,ref:"createModal",modelRoute:l.modelRoute,title:l.title,onRefresh:d.refresh,clients:l.clients},null,8,["modalWidth","modelRoute","title","onRefresh","clients"]),t(P,{modelValue:r.snackbar,"onUpdate:modelValue":e[2]||(e[2]=s=>r.snackbar=s),color:r.color},{default:o(()=>[i(_(r.text),1)]),_:1},8,["modelValue","color"])]),_:1},8,["title","modelRoute"])}const Y=N(F,[["render",U]]);export{Y as default};
