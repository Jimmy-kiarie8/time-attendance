import{_ as O}from"./MainLayout-BgYJj6nL.js";import{R as A,V as R,i as l,o as _,c as v,w as a,b as t,a as c,f as i,t as h,e as b,y as j,d as U}from"./app-CgSA-0rK.js";import T from"./table-CWBQY04z.js";import I from"./create-CXc4t7O4.js";import N from"./upload-DFvydiun.js";import S from"./filter-CgXEOWNS.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./edit-B7T-IQh7.js";import"./FormComponent-By57zqpX.js";const E={props:{data:Object,formData:Object,headers:Object,modelRoute:String,title:String,upload:Boolean,filterData:Object,filterRoute:String,canFilter:Boolean,canCreate:Boolean,canFilterTab:Boolean,actions:Object,modalWidth:Number},components:{MainLayout:O,componentFilter:S,componentTable:T,myCreate:I,myUpload:N},data(){return{tableData:{},search:"",page:1,loading:!1,dialogDelete:!1,itemsPerPage:5,editedIndex:-1,editedItem:{},tab:"all",tabs:[{icon:"mdi-alpha-l-circle",text:"All",value:"all"},{icon:"mdi-book-open-page-variant",text:"Pending",value:"Pending"},{icon:"mdi-handshake-outline",text:"Approved",value:"Approved"},{icon:"mdi-checkbox-marked",text:"Active",value:"Active"},{icon:"mdi-close-circle",text:"Arrears",value:"Arrears"},{icon:"mdi-checkbox-multiple-outline",text:"Fully Paid",value:"Paid"},{icon:"mdi-format-overline",text:"Over Paid",value:"Over paid"},{icon:"mdi-cancel",text:"Rejected",value:"Rejected"},{icon:"mdi-pen-lock",text:"Write-offs",value:"Written Off"},{icon:"mdi-alarm",text:"Restructured",value:"Restructured"}],snackbar:!1,text:"Updated",color:"black"}},methods:{goTo(n){A.visit(n)},close(){this.dialogDelete=!1},openCreate(){this.$refs.createModal.show()},async refresh(){if(this.modelRoute==="loans")this.filterLoans();else{this.loading=!0;try{const n=await R.get(`/${this.modelRoute}?axios=true`);this.tableData=n.data}catch{this.loading=!1}finally{this.loading=!1}}},uploadItem(){this.$refs.uploadModal.show()},async filterLoans(){this.loading=!0;const n={status:this.tab};try{const e=await R.post("/loan-filter",n);console.log("ðŸš€ ~ dispatch ~ response:",e),this.tableData=e.data}catch(e){console.log("ðŸš€ ~ axios.get ~ error:",e)}finally{this.loading=!1}},handleFilter(n){this.tableData=n},handleLoading(n){this.loading=n}},computed:{pageCount(){return Math.ceil(this.data.data.length/this.itemsPerPage)}},mounted(){this.tableData=this.data}},K={color:"primary"},q={class:"overflow-hidden shadow-xl sm:rounded-lg"},G={key:0};function H(n,e,o,J,d,r){const u=l("v-icon"),x=l("v-toolbar-title"),p=l("v-spacer"),s=l("v-btn"),k=l("v-tooltip"),y=l("v-toolbar"),f=l("v-divider"),C=l("componentFilter"),D=l("componentTable"),g=l("v-card"),F=l("v-card-title"),w=l("v-card-text"),V=l("v-card-actions"),M=l("v-dialog"),P=l("myUpload"),W=l("myCreate"),B=l("v-snackbar"),L=l("MainLayout");return _(),v(L,{title:o.title,rail:!1,modelRoute:o.modelRoute,ref:"snackBarModal"},{default:a(()=>[t(y,{color:"transparent"},{default:a(()=>[t(x,null,{default:a(()=>[c("h2",K,[i(h(o.title)+" Management ",1),t(u,{icon:"mdi-shimmer",size:"30"})])]),_:1}),t(p),o.canCreate?(_(),v(s,{key:0,"prepend-icon":"mdi-plus",elevated:"",variant:"outlined",onClick:r.openCreate,color:"info"},{default:a(()=>[i(" Create "+h(o.title),1)]),_:1},8,["onClick"])):b("",!0),t(k,{location:"bottom"},{activator:a(({props:m})=>[t(s,j({icon:""},m,{onClick:e[0]||(e[0]=Q=>r.refresh()),variant:"text",color:"primary"}),{default:a(()=>[t(u,null,{default:a(()=>e[3]||(e[3]=[i(" mdi-refresh ")])),_:1})]),_:2},1040)]),default:a(()=>[e[4]||(e[4]=c("span",null,"Refresh",-1))]),_:1}),e[6]||(e[6]=c("div",{style:{width:"10px"}},null,-1)),o.upload?(_(),v(s,{key:1,"prepend-icon":"mdi-upload",variant:"outlined",onClick:r.uploadItem,color:"info"},{default:a(()=>e[5]||(e[5]=[i(" Upload ")])),_:1},8,["onClick"])):b("",!0)]),_:1}),t(f),e[13]||(e[13]=c("br",null,null,-1)),c("div",q,[o.canFilter?(_(),U("div",G,[t(C,{ref:"filterRef",filterData:o.filterData,filterRoute:o.filterRoute,modelRoute:o.modelRoute,onFilter:r.handleFilter,onLoad:r.handleLoading,onRefresh:r.refresh},null,8,["filterData","filterRoute","modelRoute","onFilter","onLoad","onRefresh"]),t(f)])):b("",!0),t(g,null,{default:a(()=>[t(D,{canCreate:o.canCreate,formData:o.formData,headers:o.headers,modelRoute:o.modelRoute,title:o.title,upload:o.upload,actions:o.actions,modalWidth:o.modalWidth,tableData:d.tableData,onRefresh:r.refresh,loading:d.loading},null,8,["canCreate","formData","headers","modelRoute","title","upload","actions","modalWidth","tableData","onRefresh","loading"])]),_:1})]),t(M,{modelValue:d.dialogDelete,"onUpdate:modelValue":e[1]||(e[1]=m=>d.dialogDelete=m),"max-width":"400px"},{default:a(()=>[t(g,null,{default:a(()=>[t(F,{class:"text-h5"},{default:a(()=>e[7]||(e[7]=[i("Warning!")])),_:1}),t(f),t(w,null,{default:a(()=>e[8]||(e[8]=[i(" Are you sure you want to delete this item? ")])),_:1}),t(f),t(V,null,{default:a(()=>[t(s,{color:"red-darken-1",variant:"tonal",onClick:r.close},{default:a(()=>[t(u,null,{default:a(()=>e[9]||(e[9]=[i("mdi-close-box")])),_:1}),e[10]||(e[10]=i("Cancel "))]),_:1},8,["onClick"]),t(p),t(s,{color:"primary",variant:"tonal",onClick:n.deleteItemConfirm},{default:a(()=>[t(u,null,{default:a(()=>e[11]||(e[11]=[i("mdi-checkbox-marked")])),_:1}),e[12]||(e[12]=i("OK "))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{ref:"uploadModal",modelRoute:o.modelRoute,title:o.title,onRefresh:r.refresh},null,8,["modelRoute","title","onRefresh"]),t(W,{modalWidth:o.modalWidth,ref:"createModal",formData:o.formData,modelRoute:o.modelRoute,title:o.title,onRefresh:r.refresh},null,8,["modalWidth","formData","modelRoute","title","onRefresh"]),t(B,{modelValue:d.snackbar,"onUpdate:modelValue":e[2]||(e[2]=m=>d.snackbar=m),color:d.color},{default:a(()=>[i(h(d.text),1)]),_:1},8,["modelValue","color"])]),_:1},8,["title","modelRoute"])}const ne=z(E,[["render",H]]);export{ne as default};
