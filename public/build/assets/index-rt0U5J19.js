import{_ as j}from"./MainLayout-DCj_4SV5.js";import{O as T,V as x,i as a,o as c,c as _,w as l,b as t,a as u,f as s,t as h,e as p,y as I,d as N}from"./app-C40yS1Zs.js";import S from"./table-Cnp6pp_7.js";import z from"./create-pxvxEnf6.js";import E from"./upload-DdjKLuOk.js";import K from"./filter-Byg1BZ4n.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./edit-Cy_00TZ7.js";import"./FormComponent-BXJpgamY.js";import"./payment-BIEyGYrK.js";import"./reschedule-Cdm-Y0gu.js";import"./show-CI3xN_NI.js";import"./statement-DGkpOG_O.js";import"./payments-CR_igQO_.js";import"./penalties-Cwf6Ko_F.js";import"./loan-editor-BtEJIZp5.js";import"./documents-D00fmact.js";const G={props:{data:Object,formData:Object,headers:Object,modelRoute:String,title:String,upload:Boolean,filterData:Object,filterRoute:String,canFilter:Boolean,canCreate:Boolean,canFilterTab:Boolean,actions:Object,modalWidth:Number},components:{MainLayout:j,componentFilter:K,componentTable:S,myCreate:z,myUpload:E},data(){return{tableData:{},search:"",page:1,loading:!1,dialogDelete:!1,itemsPerPage:5,editedIndex:-1,editedItem:{},tab:"all",tabs:[{icon:"mdi-alpha-l-circle",text:"All",value:"all"},{icon:"mdi-book-open-page-variant",text:"Pending",value:"Pending"},{icon:"mdi-handshake-outline",text:"Approved",value:"Approved"},{icon:"mdi-checkbox-marked",text:"Active",value:"Active"},{icon:"mdi-close-circle",text:"Arrears",value:"Arrears"},{icon:"mdi-checkbox-multiple-outline",text:"Fully Paid",value:"Paid"},{icon:"mdi-format-overline",text:"Over Paid",value:"Over paid"},{icon:"mdi-cancel",text:"Rejected",value:"Rejected"},{icon:"mdi-pen-lock",text:"Write-offs",value:"Written Off"},{icon:"mdi-alarm",text:"Restructured",value:"Restructured"}],snackbar:!1,text:"Updated",color:"black"}},methods:{goTo(n){T.visit(n)},close(){this.dialogDelete=!1},openCreate(){this.$refs.createModal.show()},async refresh(){if(this.modelRoute==="loans")this.filterLoans();else{this.loading=!0;try{const n=await x.get(`/${this.modelRoute}?axios=true`);this.tableData=n.data}catch{this.loading=!1}finally{this.loading=!1}}},uploadItem(){this.$refs.uploadModal.show()},async filterLoans(){this.loading=!0;const n={status:this.tab};try{const e=await x.post("/loan-filter",n);console.log("ðŸš€ ~ dispatch ~ response:",e),this.tableData=e.data}catch(e){console.log("ðŸš€ ~ axios.get ~ error:",e)}finally{this.loading=!1}},handleFilter(n){this.tableData=n},handleLoading(n){this.loading=n}},computed:{pageCount(){return Math.ceil(this.data.data.length/this.itemsPerPage)}},mounted(){this.tableData=this.data}},H={color:"primary"},J={class:"overflow-hidden shadow-xl sm:rounded-lg"},Q={key:0};function X(n,e,o,Y,r,d){const f=a("v-icon"),R=a("v-toolbar-title"),b=a("v-spacer"),m=a("v-btn"),k=a("v-tooltip"),y=a("v-toolbar"),v=a("v-divider"),C=a("componentFilter"),D=a("v-tab"),V=a("v-tabs"),w=a("v-sheet"),F=a("componentTable"),g=a("v-card"),O=a("v-card-title"),L=a("v-card-text"),M=a("v-card-actions"),P=a("v-dialog"),W=a("myUpload"),B=a("myCreate"),A=a("v-snackbar"),U=a("MainLayout");return c(),_(U,{title:o.title,rail:!1,modelRoute:o.modelRoute,ref:"snackBarModal"},{default:l(()=>[t(y,{color:"transparent"},{default:l(()=>[t(R,null,{default:l(()=>[u("h2",H,[s(h(o.title)+" Management ",1),t(f,{icon:"mdi-shimmer",size:"30"})])]),_:1}),t(b),o.canCreate?(c(),_(m,{key:0,"prepend-icon":"mdi-plus",elevated:"",variant:"outlined",onClick:d.openCreate,color:"info"},{default:l(()=>[s(" Create "+h(o.title),1)]),_:1},8,["onClick"])):p("",!0),t(k,{location:"bottom"},{activator:l(({props:i})=>[t(m,I({icon:""},i,{onClick:e[0]||(e[0]=Z=>d.refresh()),variant:"text",color:"primary"}),{default:l(()=>[t(f,null,{default:l(()=>e[5]||(e[5]=[s(" mdi-refresh ")])),_:1})]),_:2},1040)]),default:l(()=>[e[6]||(e[6]=u("span",null,"Refresh",-1))]),_:1}),e[8]||(e[8]=u("div",{style:{width:"10px"}},null,-1)),o.upload?(c(),_(m,{key:1,"prepend-icon":"mdi-upload",variant:"outlined",onClick:d.uploadItem,color:"info"},{default:l(()=>e[7]||(e[7]=[s(" Upload ")])),_:1},8,["onClick"])):p("",!0)]),_:1}),t(v),e[15]||(e[15]=u("br",null,null,-1)),u("div",J,[o.canFilter?(c(),N("div",Q,[t(C,{ref:"filterRef",filterData:o.filterData,filterRoute:o.filterRoute,modelRout:o.modelRoute,onFilter:d.handleFilter,onLoad:d.handleLoading,onRefresh:d.refresh},null,8,["filterData","filterRoute","modelRout","onFilter","onLoad","onRefresh"]),o.canFilterTab?(c(),_(w,{key:0,color:"primary",elevation:"3",rounded:"lg"},{default:l(()=>[t(V,{modelValue:r.tab,"onUpdate:modelValue":[e[1]||(e[1]=i=>r.tab=i),e[2]||(e[2]=i=>d.filterLoans())],items:r.tabs,"align-tabs":"center",color:"white",height:"60","slider-color":"#f78166"},{tab:l(({item:i})=>[t(D,{"prepend-icon":i.icon,text:i.text,value:i.value,class:"text-none"},null,8,["prepend-icon","text","value"])]),_:1},8,["modelValue","items"])]),_:1})):p("",!0),t(v)])):p("",!0),t(g,null,{default:l(()=>[t(F,{canCreate:o.canCreate,formData:o.formData,headers:o.headers,modelRoute:o.modelRoute,title:o.title,upload:o.upload,actions:o.actions,modalWidth:o.modalWidth,tableData:r.tableData,onRefresh:d.refresh,loading:r.loading},null,8,["canCreate","formData","headers","modelRoute","title","upload","actions","modalWidth","tableData","onRefresh","loading"])]),_:1})]),t(P,{modelValue:r.dialogDelete,"onUpdate:modelValue":e[3]||(e[3]=i=>r.dialogDelete=i),"max-width":"400px"},{default:l(()=>[t(g,null,{default:l(()=>[t(O,{class:"text-h5"},{default:l(()=>e[9]||(e[9]=[s("Warning!")])),_:1}),t(v),t(L,null,{default:l(()=>e[10]||(e[10]=[s(" Are you sure you want to delete this item? ")])),_:1}),t(v),t(M,null,{default:l(()=>[t(m,{color:"red-darken-1",variant:"tonal",onClick:d.close},{default:l(()=>[t(f,null,{default:l(()=>e[11]||(e[11]=[s("mdi-close-box")])),_:1}),e[12]||(e[12]=s("Cancel "))]),_:1},8,["onClick"]),t(b),t(m,{color:"primary",variant:"tonal",onClick:n.deleteItemConfirm},{default:l(()=>[t(f,null,{default:l(()=>e[13]||(e[13]=[s("mdi-checkbox-marked")])),_:1}),e[14]||(e[14]=s("OK "))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(W,{ref:"uploadModal",modelRoute:o.modelRoute,title:o.title,onRefresh:d.refresh},null,8,["modelRoute","title","onRefresh"]),t(B,{modalWidth:o.modalWidth,ref:"createModal",formData:o.formData,modelRoute:o.modelRoute,title:o.title,onRefresh:d.refresh},null,8,["modalWidth","formData","modelRoute","title","onRefresh"]),t(A,{modelValue:r.snackbar,"onUpdate:modelValue":e[4]||(e[4]=i=>r.snackbar=i),color:r.color},{default:l(()=>[s(h(r.text),1)]),_:1},8,["modelValue","color"])]),_:1},8,["title","modelRoute"])}const pe=q(G,[["render",X]]);export{pe as default};
