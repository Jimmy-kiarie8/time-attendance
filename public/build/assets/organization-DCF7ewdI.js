import{r as c,x as S,i as n,o as f,c as x,w as l,V as k,a as _,b as a,y as q,d as J,f as v,e as C,t as w}from"./app-CHx4gbMi.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={key:0,class:"d-flex transition-fast-in-fast-out v-card--reveal text-h6 align-center justify-center",style:{height:"100%"}},X={class:"text-h5"},G={class:"text-body-2"},K={__name:"organization",setup(L){const d=c(!1),b=c(!1),o=c({name:"",email:"",phone:"",address:"",city:"",country:"",timezone:"",logo:""}),U=c(""),z=c("success"),y=c(!1),V=c(null);function g(s){d.value=s}function E(){V.value&&V.value.click()}async function P(s){const e=s.target.files[0];if(!e)return;const p=new FormData;p.append("file",e);try{const i=await k.post(`/logo/${o.value.id}`,p,{headers:{"Content-Type":"multipart/form-data"}});console.log(i),o.value.logo=i.data.data.logo,m(i.data.message,"success")}catch(i){console.error("Error uploading file:",i),m("Failed to update avatar. Please try again.","error")}}function m(s,e){U.value=s,z.value=e,y.value=!0}async function N(){b.value=!0;try{const s=await k.post("/company",o.value);o.value=s.data,m("Company information updated successfully!","success"),g(!1)}catch(s){console.error("Failed to update company:",s),m("Failed to update company information. Please try again.","error")}finally{b.value=!1}}async function T(){try{const s=await k.get("/company");o.value=s.data}catch(s){console.error("Failed to fetch company data:",s),m("Failed to fetch company information. Please try again.","error")}}return S(()=>{T()}),(s,e)=>{const p=n("v-icon"),i=n("v-btn"),B=n("v-expand-transition"),I=n("v-img"),O=n("v-avatar"),A=n("v-hover"),u=n("v-col"),F=n("v-row"),r=n("v-text-field"),D=n("v-card-text"),R=n("v-spacer"),W=n("v-card-actions"),Z=n("v-card"),$=n("v-snackbar"),j=n("v-container");return f(),x(j,null,{default:l(()=>[e[17]||(e[17]=_("h1",{class:"text-h4 mb-6"},"Organization",-1)),a(Z,{class:"mb-6",variant:"tonal"},{default:l(()=>[a(D,null,{default:l(()=>[a(F,{align:"center"},{default:l(()=>[a(u,{cols:"auto"},{default:l(()=>[a(A,null,{default:l(({isHovering:t,props:H})=>[a(O,q({size:"100"},H,{class:"position-relative overflow-hidden"}),{default:l(()=>[a(I,{src:o.value.logo||"https://play-lh.googleusercontent.com/Ieu-H2JARy4EVnrdxTse1jqfe3HWQOT16Eis6f8opR-Z_d_CfbxWXn1ea86aZEzygfiZ=w240-h480-rw",alt:"Avatar",cover:""},{default:l(()=>[a(B,null,{default:l(()=>[t?(f(),J("div",Q,[a(i,{icon:"",onClick:E},{default:l(()=>[a(p,null,{default:l(()=>e[13]||(e[13]=[v("mdi-camera-outline")])),_:1})]),_:1})])):C("",!0)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1040)]),_:1}),_("input",{type:"file",ref_key:"fileInput",ref:V,style:{display:"none"},onChange:P,accept:"image/*"},null,544)]),_:1}),a(u,null,{default:l(()=>[_("h2",X,w(o.value.name),1),_("p",G,w(o.value.email),1)]),_:1}),d.value?C("",!0):(f(),x(u,{key:0,cols:"auto",onClick:e[0]||(e[0]=t=>g(!0))},{default:l(()=>[a(i,{color:"primary"},{default:l(()=>e[14]||(e[14]=[v("Edit")])),_:1})]),_:1}))]),_:1}),a(F,{class:"mt-6"},{default:l(()=>[a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Name",variant:"outlined",modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.name=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Phone",variant:"outlined",modelValue:o.value.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.phone=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Address",variant:"outlined",modelValue:o.value.address,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.address=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Pin",variant:"outlined",modelValue:o.value.pin,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.pin=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"P.O.Box",variant:"outlined",modelValue:o.value.po_box,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.po_box=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Website",variant:"outlined",modelValue:o.value.website,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.website=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Registration No",variant:"outlined",modelValue:o.value.registration_no,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.registration_no=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"City",variant:"outlined",modelValue:o.value.city,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.city=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Country",variant:"outlined",modelValue:o.value.country,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.country=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",sm:"4"},{default:l(()=>[a(r,{clearable:"",density:"compact",label:"Timezone",variant:"outlined",modelValue:o.value.timezone,"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.timezone=t),disabled:!d.value},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),d.value?(f(),x(W,{key:0},{default:l(()=>[a(R),a(i,{color:"primary",variant:"outlined",onClick:N,loading:b.value},{default:l(()=>e[15]||(e[15]=[v("Update")])),_:1},8,["loading"]),a(i,{color:"error",variant:"outlined",onClick:e[11]||(e[11]=t=>g(!1))},{default:l(()=>e[16]||(e[16]=[v("Cancel")])),_:1})]),_:1})):C("",!0)]),_:1}),a($,{modelValue:y.value,"onUpdate:modelValue":e[12]||(e[12]=t=>y.value=t),color:z.value},{default:l(()=>[v(w(U.value),1)]),_:1},8,["modelValue","color"])]),_:1})}}},ee=M(K,[["__scopeId","data-v-2403acb6"]]);export{ee as default};
